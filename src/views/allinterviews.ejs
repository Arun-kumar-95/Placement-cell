<link rel="stylesheet" href="../css/dashboard.css">
<link rel="stylesheet" href="../css/interviews.css">
<link rel="stylesheet" href="../css/error.css">

<script defer src="../js/toggler.js" type="text/javascript"></script>
<script src="../js/notification.js" type="text/javascript" defer></script>
<script src="../js/interview.js" type="text/javascript" defer></script>
<script defer src="./js/Helpers.js" type="text/javascript"></script>
<script defer src="./js/logout.js" type="text/javascript"></script>

<div class="dashboard-wrapper">
    <div class="dashboard-container">
        <div class="dashboard">

            <!-- side bar -->
            <%- include("./partials/_sidebar"); %>

                <div class="dashboard-main">
                    <!-- notification -->
                    <%- include("./partials/_notification"); %>


                        <!-- notofication pannel -->
                        <%- include("./partials/_topheader"); %>

                            <div class="page-index">
                                <div class="page-header">
                                    <h1>Interviews</h1>
                                    <p class="page-title">Admin / <a href="javascript:void(0)">Interviews</a></p>
                                </div>
                            </div>

                            <!-- INTERVIEW LISTS -->


                            <% if(data[0].length> 0){%>

                                <div class="interview__wrapper">

                                    <div class="interview-lists">
                                        <div class="interview__container">
                                            <div class="interview">
                                                <div class="interview-index">
                                                    <span>Sno</span>
                                                </div>
                                                <div class="company-name">
                                                    <h3>Company</h3>
                                                </div>
                                                <div class="role">
                                                    <h3>Role</h3>
                                                </div>
                                                <div class="interview-date">
                                                    <h3>Interview Date</h3>
                                                </div>
                                                <div class="applied-students">
                                                    <h3>Applied Students</h3>
                                                </div>
                                                <div class="interview-venue">
                                                    <h3>Venue</h3>
                                                </div>
                                                <div class="delete-wrap">
                                                    <h3>Trash</h3>
                                                </div>
                                            </div>
                                        </div>


                                        <% data[0].forEach((item , index)=>{ %>

                                            <div class="interview__container">
                                                <div class="interview">
                                                    <div class="interview-index">
                                                        <input type="checkbox" class="input-checkbox"
                                                            name="interview-id" id="<%= item._id %>" />
                                                        <span>
                                                            <%= index + 1 %>
                                                        </span>
                                                    </div>
                                                    <div class="company-name">

                                                        <p>
                                                            <%= item.company %>
                                                        </p>
                                                    </div>
                                                    <div class="role">
                                                        <p>
                                                            <%= item.role %>
                                                        </p>
                                                    </div>
                                                    <div class="interview-date">
                                                        <p>
                                                            <%= item.date.toDateString() %>
                                                        </p>
                                                    </div>

                                                    <div class="applied-students">
                                                        <p style="text-align: center">
                                                            <%= item.appliedStudents.length %>
                                                        </p>
                                                    </div>
                                                    <div class="interview-venue">
                                                        <p>
                                                            <%= item.venue %>
                                                        </p>
                                                    </div>

                                                    <div class="delete-wrap">
                                                        <form action="" class="delete__interview__form">
                                                            <button class="btn btn-delete" id="<%= item._id %>">
                                                                <svg fill="currentColor" width="20px" height="20px"
                                                                    viewBox="0 0 24 24"
                                                                    preserveAspectRatio="xMidYMid meet"
                                                                    focusable="false">
                                                                    <g>
                                                                        <path
                                                                            d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z">
                                                                        </path>
                                                                    </g>
                                                                </svg>
                                                            </button>

                                                        </form>
                                                    </div>
                                                </div>

                                                <div class="student__details" data-id="<%= item._id%>"
                                                    style="display:none;">

                                                    <% if(item.appliedStudents.length> 0) {%>
                                                        <div class="wrapper" style="display:flex;">


                                                            <table>
                                                                <thead>
                                                                    <th>S.no</th>
                                                                    <th>Full name</th>
                                                                    <th>Batch</th>
                                                                    <th>Phone</th>


                                                                </thead>
                                                                <tbody>
                                                                    <% item.appliedStudents.forEach((item , index)=>{ %>
                                                                        <tr>
                                                                            <td>
                                                                                <% if(index < 9){ %>
                                                                                    0<%= index + 1 %>
                                                                                        <% } else{%>
                                                                                            <%= index + 1 %>
                                                                                                <%}%>
                                                                            </td>
                                                                            <td style="text-transform: capitalize;">
                                                                                <p>
                                                                                    <%= item.name %>
                                                                                </p>
                                                                            </td>
                                                                            <td>
                                                                                <p>
                                                                                    <%= item.batch %>
                                                                                </p>
                                                                            </td>
                                                                            <td>
                                                                                <p>
                                                                                    <%= item.phone %>
                                                                                </p>
                                                                            </td>

                                                                        </tr>

                                                                        <%})%>

                                                                </tbody>
                                                            </table>

                                                            <table style="width:20%">
                                                                <thead>
                                                                    <th>Status</th>
                                                                </thead>
                                                                <tbody>
                                                                    <% item.appliedStudents.forEach((item , index)=>{ %>
                                                                        <tr>
                                                                            <td>
                                                                                <p>
                                                                                    <%= item.status %>
                                                                                </p>
                                                                            </td>
                                                                        </tr>



                                                                        <%})%>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <%}else{%>

                                                            <h2
                                                                style="color:red; font-weight:400; padding: 0.5rem; border-bottom:1px solid #000">
                                                                *No one applied for this interview
                                                            </h2>
                                                            <%}%>
                                                </div>

                                            </div>

                                            <%})%>
                                    </div>

                                </div>

                                <%}else{%>
                                    <div class="text-warning">
                                        <p style="text-align: center; color: red; font-size:1.2rem">* No Interview found
                                        </p>
                                    </div>

                                    <%}%>
                </div> <!-- /dashboard main -->

        </div> <!-- /dashboard -->

    </div> <!-- /dashboard container-->
</div>